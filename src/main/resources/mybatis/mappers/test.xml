<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="test">
	
	<select id="all_tabs" resultType="Map">
		SELECT TABLE_NAME, COLUMN_NAME, DATA_TYPE
		FROM USER_TAB_COLUMNS
		WHERE TABLE_NAME IN (SELECT TABLE_NAME FROM USER_TABLES)
		ORDER BY TABLE_NAME ASC, COLUMN_ID ASC
	</select>
	
	<select id="all_cols" resultType="Map">
		SELECT DISTINCT COLUMN_NAME, DATA_TYPE, DATA_LENGTH, DATA_PRECISION, DATA_SCALE
		FROM USER_TAB_COLUMNS
		WHERE TABLE_NAME IN (SELECT TABLE_NAME FROM USER_TABLES)
	</select>
	
	
	<insert id="insert_data" parameterType="Set">
		<foreach collection="table_rows" item="row" separator=" " open="INSERT ALL" close="SELECT * FROM DUAL">
			INSERT INTO #{row.table_name}
			<foreach collection="row.columns" item="column" separator="," open="(" close=")">
				#{column}
			</foreach>
			<foreach collection="row.values" item="value" separator="," open="VALUES(" close=")">
				<!-- <choose>
					<when test="value==null || value==''">
						' '
					</when>
					<otherwise>-->
						#{value}
				<!-- </otherwise>
				</choose> -->
			</foreach>
		</foreach>
	</insert>
	
</mapper>