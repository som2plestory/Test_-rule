<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="test">
	
	<select id="all_tabs" resultType="Map">
		SELECT TABLE_NAME, COLUMN_NAME, DATA_TYPE
		FROM USER_TAB_COLUMNS
		WHERE TABLE_NAME IN (SELECT TABLE_NAME FROM USER_TABLES)
		ORDER BY TABLE_NAME ASC, COLUMN_ID ASC
	</select>
	
	<select id="all_cols" resultType="Map">
		SELECT DISTINCT COLUMN_NAME, DATA_TYPE, DATA_LENGTH, DATA_PRECISION, DATA_SCALE
		FROM USER_TAB_COLUMNS
		WHERE TABLE_NAME IN (SELECT TABLE_NAME FROM USER_TABLES)
	</select>
	
	<!-- mis -->
	<insert id="insert_data2" parameterType="List">
		<foreach collection="list" item="row" separator=" " open="INSERT ALL" close="SELECT * FROM DUAL">
			INTO ${row.table_name}
			<foreach collection="row.cols" item="col" separator="," open="(" close=") ">
				${col}
			</foreach>
			<foreach collection="row.vals" item="val" separator="," open="VALUES(" close=") ">
				#{val}
			</foreach>
		</foreach>
	</insert>
	
	
	<insert id="insert_data3" parameterType="List">
		<foreach collection="list" item="row" separator=" " open="INSERT ALL" close="SELECT * FROM DUAL">
			INTO ${row.table_name}
			(${row.cols})
			VALUES(${row.vals})
		</foreach>
	</insert>
	
	<insert id="insert_data4" parameterType="Map">
			INSERT INTO ${row.table_name}
			(${row.cols})
			VALUES(${row.vals})
	</insert>
	
	<insert id="insert_data" parameterType="Map">
		INSERT INTO ${table_name}
		<foreach collection="cols" item="col" separator="," open="(" close=") ">
			${col}
		</foreach>
		<foreach collection="vals" item="val" separator="," open="VALUES(" close=") ">
			<choose>
					<when test="value==null || value==''">
						' '
					</when>
					<otherwise>
						#{val}
					</otherwise>
			</choose>
		</foreach>
	</insert>
	
</mapper>